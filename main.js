!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(function(){return(()=>{"use strict";var t={550:(t,e,n)=>{n.r(e);const o={weight:"kg",pcs:"pcs"},r="myShopping";class i{constructor(t,e,n){this.name=t,this.quantity=Number(e),this.units=n,this.bought=!1}editQuantity(t){t!==this.quantity&&(this.quantity=Number(t))}editName(t){t!==this.name&&(this.name=t)}editUnits(t){t!==this.units&&(this.units=t)}editBought(){this.bought=!this.bought}}class a{constructor(t){this.name=t,this.productList=[]}changeName(t){this.name=t}addProduct(t){this.productList.push(t)}deleteProduct(t){const e=this.productList.filter((e=>e!==t));this.productList=e}}class u{constructor(t){this.categoryList=[],this.total=0,this.totalPCS=0,this.totalWeight=0,t.forEach((t=>{const e=new a(t);this.categoryList.push(e)}))}addProductToCategory(t,e){e.addProduct(t),this.sumTotal()}deleteProductFromCategory(t,e){e.deleteProduct(t),this.sumTotal()}addCategory(t){const e=new a(t);this.categoryList.push(e)}deleteCategory(t){const e=this.categoryList.filter((e=>e!==t));this.categoryList=e,this.sumTotal()}changeProductCategory(t,e,n){this.deleteProductFromCategory(t,e),this.addProductToCategory(t,n)}sumTotal(){let t=0,e=0,n=0;for(let r of this.categoryList)for(let i of r.productList)i.units===o.weight?(t+=1,n+=i.quantity):(t+=i.quantity,e+=i.quantity);this.total=t,this.totalPCS=e,this.totalWeight=n}}function c(t,e){const n=document.createElement(t);for(let t in e)n.classList.add(e[t]);return n}function s(t,e){const n=document.createElement(t);for(let t in e)n.setAttribute(e[t][0],e[t][1]);return n}function d(t,e,n){const o=c("button",t);return o.setAttribute("id",e),o.textContent=n,o}function l(t,e){const n=c("button",t),o=c("i",e);return n.appendChild(o),n}function p(t,e){for(let n in e)t.appendChild(e[n]);return t}function m(t,e,n){const o=c("label",t);return o.setAttribute("for",e),o.textContent=n,o}function f(){let t=c("div",["btn__group"]),e=l(["btn","btn__boardless","btn__edit"],["far","fa-edit"]),n=l(["btn","btn__boardless","btn__delete"],["far","fa-trash-alt"]);return p(t,[e,n]),[t,e,n]}function y(){document.querySelector("#overlay").classList.toggle("active")}function g(t){y(),t.innerHTML="",t.classList.toggle("inactive")}function h(){y();const t=document.querySelector("#form");return t.classList.toggle("inactive"),t}function b(t){const e=d(["btn","btn__cancel"],"cancel","Cancel");return e.addEventListener("click",(()=>{g(t)})),e}function v(){const t=h(),e=m(["form__label"],"category-name","Category name"),n=s("input",[["name","category-name"],["placeholder","Enter category name"],["class","form__input"]]);n.required=!0;let o=c("div",["form__group"]);p(o,[e,n]);const r=d(["btn","btn__add"],"add-category","+ Add new category");r.setAttribute("type","submit");const i=b(t);let a=c("div",["btn__group"]);return p(a,[r,i]),{form:t,nameInput:n,addButton:r,buttonGroup:a,nameGroup:o}}function _(t){const e=h(),n=m(["form__label"],"category","Product name"),r=s("input",[["name","product-name"],["placeholder","Enter product name"],["class","form__input"]]);r.required=!0;let i=c("div",["form__group"]);p(i,[n,r]);const a=m(["form__label"],"category","Choose category");let u=function(t){const e=s("select",[["name","category"]]);e.classList.add("form__select"),e.required=!0;let n=document.createElement("option");n.value="",n.disabled=!0,n.selected=!0,n.textContent="Choose category",e.appendChild(n);for(let n in t){const o=t[n];let r=document.createElement("option");r.value=`${o.name}-${n}`,r.textContent=o.name,e.appendChild(r)}return e}(t),l=c("div",["form__group"]);p(l,[a,u]);const f=c("div",["form__group","u-margin-button-medium"]);for(let t in o){const e=c("div",["form__radio-group"]),n=s("input",[["type","radio"],["id",o[t]],["value",o[t]],["name","units"],["class","form__radio-input"]]);n.required=!0;const r=m(["form__radio-label"],o[t],o[t]),i=c("span",["form__radio-button"]);r.appendChild(i),p(e,[n,r]),f.appendChild(e),n.addEventListener("change",(()=>{n.value===o.weight&&n.checked?(g.setAttribute("step","0.1"),g.setAttribute("min","0.1")):g.hasAttribute("step")&&(g.removeAttribute("step"),g.setAttribute("min","1"))}))}const y=m(["form__label"],"product-quantity","Product quantity"),g=s("input",[["name","product-quantity"],["type","number"],["placeholder","0"],["class","form__input"],["min","1"]]);g.required=!0;let v=c("div",["form__group"]);p(v,[y,g]);const _=d(["btn","btn__add"],"add-category","+ Add new product");_.setAttribute("type","submit");const C=b(e);let L=c("div",["btn__group"]);return p(L,[_,C]),{form:e,nameInput:r,categorySelector:u,quantityInput:g,nameGroup:i,categoryGroup:l,radioContainer:f,quantityGroup:v,addButton:_,buttonGroup:L}}function C(t){return!!t.validity.valid}function L(t,e,n,o){return!!(t.validity.valid&&e.validity.valid&&n.validity.valid&&o)}function E(t,e){const n=v();n.nameInput.value=e.name,n.addButton.textContent="Edit category",n.form.addEventListener("submit",(function o(r){if(r.preventDefault(),C(n.nameInput)){const r=n.nameInput.value;e.changeName(r),I(t),g(n.form),n.form.removeEventListener("submit",o)}})),p(n.form,[n.nameGroup,n.buttonGroup])}function q(t,e,n,r){const a=_(t.categoryList);a.addButton.textContent="Edit product";const u=a.radioContainer.querySelector(`input[id=${r.units}]`);console.log(u),u.checked=!0,r.units===o.weight&&(a.quantityInput.setAttribute("step","0.1"),a.quantityInput.setAttribute("min","0.1")),a.nameInput.value=r.name,a.quantityInput.value=r.quantity,a.categorySelector.value=`${e.name}-${n}`,console.log(a.categorySelector.value),a.form.addEventListener("submit",(function o(u){u.preventDefault();const c=a.radioContainer.querySelector('input[name="units"]:checked').value;if(L(a.nameInput,a.quantityInput,a.categorySelector,c)){const u=a.nameInput.value,s=a.quantityInput.value,[d,l]=a.categorySelector.value.split("-"),p=Number(l);if(d===e.name&&n===p)r.editQuantity(s),r.editName(u),r.editUnits(c),t.sumTotal();else{let n=t.categoryList.filter(((t,e)=>{if(t.name===d&&e===p)return t}))[0];t.deleteProductFromCategory(r,e);const o=new i(u,s,c);t.addProductToCategory(o,n)}I(t),g(a.form),a.form.removeEventListener("submit",o)}})),p(a.form,[a.nameGroup,a.categoryGroup,a.radioContainer,a.quantityGroup,a.buttonGroup])}function S(t,e){return localStorage.getItem(t)!==JSON.stringify(e)&&(localStorage.setItem(t,JSON.stringify(e)),!0)}function I(t){const e=document.querySelector(".shopping-list");e.innerHTML="";for(let n in t.categoryList){let o=t.categoryList[n],i=c("div",["shopping-list__category"]),a=c("div",["shopping-list__category-name"]);const u=document.createElement("h4");u.textContent=o.name;const[d,l,y]=f();l.addEventListener("click",(()=>{E(t,o)})),y.addEventListener("click",(()=>{t.deleteCategory(o),I(t)})),p(a,[u,d]),i.appendChild(a),o.productList.forEach(((e,a)=>{let u=c("div",["shopping-list__element"]),d=c("div",["u-flex-left"]),l=c("div",["u-flex-right","shopping-list__element-details"]),y=`category-${n}_product-${a}`,g=s("input",[["type","checkbox"],["id",y]]);g.classList.add("shopping-list__checkbox-input"),g.checked=e.bought,g.addEventListener("change",(()=>{e.editBought(),S(r,t)}));let h=m(["shopping-list__checkbox-label"],y,e.name),b=c("span",["shopping-list__checkbox-mark"]),v=c("i",["fas","fa-check"]);b.appendChild(v),h.appendChild(b);let _=document.createElement("span");_.textContent=`${e.quantity}  ${e.units}`;const[C,L,E]=f();L.addEventListener("click",(()=>{q(t,o,n,e)})),E.addEventListener("click",(()=>{t.deleteProduct(e,o),I(t)})),p(d,[g,h]),p(l,[_,C]),p(u,[d,l]),i.appendChild(u)})),e.appendChild(i)}document.getElementById("total").textContent=t.total,document.getElementById("total-weight").textContent=`${t.totalWeight} kg`,document.getElementById("total-pieces").textContent=`${t.totalPCS} pcs.`,S(r,t)}let x;x=localStorage.getItem("myShopping")?function(t){const e=JSON.parse(localStorage.getItem("myShopping"));Object.setPrototypeOf(e,u.prototype);for(let t of e.categoryList){Object.setPrototypeOf(t,a.prototype);for(let e of t.productList)Object.setPrototypeOf(e,i.prototype)}return e}():new u(["warzywa","owoce","nabiał","mięso i ryby","artykuły higieniczne","pieczywo","produkty suche"]);const P=document.getElementById("adding-buttons-product"),k=document.getElementById("adding-buttons-category");P.addEventListener("click",(()=>{!function(t){const e=_(t.categoryList);e.form.addEventListener("submit",(function n(o){o.preventDefault();const r=e.radioContainer.querySelector('input[name="units"]:checked').value;if(L(e.nameInput,e.quantityInput,e.categorySelector,r)){const o=e.nameInput.value,a=e.quantityInput.value,[u,c]=e.categorySelector.value.split("-"),s=Number(c),d=t.categoryList.filter(((t,e)=>t.name===u&&e===s))[0],l=new i(o,a,r);t.addProductToCategory(l,d),I(t),g(e.form),e.form.removeEventListener("submit",n)}})),p(e.form,[e.nameGroup,e.categoryGroup,e.radioContainer,e.quantityGroup,e.buttonGroup])}(x)})),k.addEventListener("click",(()=>{!function(t){const e=v();e.form.addEventListener("submit",(function n(o){if(o.preventDefault(),C(e.nameInput)){const o=e.nameInput.value;t.addCategory(o),I(t),g(e.form),e.form.removeEventListener("submit",n)}})),p(e.form,[e.nameGroup,e.buttonGroup])}(x)})),I(x)}},e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}return n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(550)})()}));